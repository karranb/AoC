input = """#.............#.#...........................................................#..........#...........................#..........#...
............#......................#.......#..#.........#...................##....................................................
..............#...........#..#.......#.........#.#...........................#................................#......#............
.....#......................................#......#..#...................#....................#......................#...........
...#............................#................................#................................................................
..........#..................#.....#......................................................#.......................................
..#........#.......#.#...............................................................#......#.................................#...
.#....#................#................#.....#...................#...............................................#..#............
.......................................................................................#...#.#....#........##......#........#.#.##
............................................#.................#.....................#..........................#..................
....#..........##......................#.................................................................................#........
......#.............##.........#.......#.........#.......#.............#...#.......#..............................................
.#............................................................................#..........#....#...................................
...#..#....#..............................#...........................................................................#...........
.............#....................................................................................................................
................................#..................##...................................#...............................#......#..
..........#.........#.................#..........###...........................................#............#...#.................
.............#....................................#.......#.#.#............#............................................#.........
......#.#..............................................................................................#.........................#
...#...#.........#.........#..#......#................##.................#........................................................
.................................#......................#........#................#........................#......................
.......................##..............#................#................#..............................#.........................
.......#...#.....#.....##........................#..................##.....#......................................................
.............................................#...........................#..........................................#.....#.......
.........................#...............#....#..............#.......#...............#.#.................#.................#......
...........................................................#....#..................................#..............................
..........................#.................................................#............................##....#..................
.................#...#.........................................................#........................#.....#..#................
.........................#....#................................................#...#.....................#....#...........#.......
................................................##.......#.#....................................#.......##........................
..........##...#.......................#....#..#....................#........................#....................................
#......#.......................#............#.....................................................................#...............
.......#.......#...#..#..........#.......................................#.............#......#...................................
...............#............#..................#.................................................................................#
.......#...........#.......................##.....#.........#...........#...................#......#.........#.............##....#
...................#.........................#......#..........................................#..........#.........#......#......
.....#............#..............#...#......#....................#.............#..................................................
................................................#........#.....#...................#.....................................#.....#..
......................#.#...##......................##...............................................#.................#..........
#...................#.........................#...........#.....#................#.....................#...................#......
....#................#.....#.............#.....................................#....#...#.................................#.......
.........#.....................................................................................................#.#.......#........
.........#..........##..............................#............................#.#.............................#................
#....#.#..............................................##...#...#...............#.............#....................................
........#..#.#...................#.......................................................................#.............#..#.#...#.
.................................................................................................................#.......#........
............................................#..#...............##........#..........#.......................................#....#
........#...........................#............................#.....#........................#..........#...#..........#.......
.#...........#...................................................#...........................................#................#.#.
............#...............................#........#...........#..........#...........#.#..............#........................
...............................................................................##.#................#..............................
.#.......................#.#...........#..................................#.......................................................
..#..............................................##................#.......#....#..............#.....................#...#........
...................#.....#................................................#..........#.........#.........#.....................#..
........#................#................................................................................#......#................
...................#...#....#.........................#.........................#....................#..........................#.
.................#.......................................................#................................................#.......
..#...........................##.#.............#..#............................................#.......................#.#........
..#......#.........................................................................#.......................#......................
...........................................................................................................#............#......#..
............................................................^..........................................#..........#...............
..#.........#....................#..........................................#........#.........................................#..
........#...............#....#.............#......#.........................................................................#.....
.........#......#.....#..............#...........................................................#..............#.................
.........#...................................................#...###...........#.......#.##.......................................
.....................##.................#.........##.....................#................#................#.........#............
.......................................................................#..............#..............#.................#..........
.##.........#..........................................................................#....................................#.....
.........................#.............................#........................................................................#.
........#.............................................#......#....#.....................................#....................#....
........#...#..............................................................................#.........#............................
..............................#................................#..........#..............#..................................#.....
........##..#...................................#................................#.................#.........#......#..#........#.
..................#......#...................................................................#....................................
..........#.............#..............#........#............#...............#..#..........#..............#.#...#............#....
............................##....#..............#......................................................................#.........
...............................................#.....#...........#.....##...............#..#......................................
.........................#.......#...............................#...........#.........#...........#....#.........................
.#............#...#...............#..............................................................#..........................#....#
#...........#......................................................#.............................#......#.........................
..................................................#....#...............#.........................#................................
................................................#..........................#.......#..............................#....##.......#.
........#......#..#............#................#............................#......#.##.........#....................#..#........
.......................................................#..#.#....................#..#......................................#......
.....................#.......................................................................#............#.......................
.....................##........................#...................#.....................#........................................
..........................#...........................................................................................#...........
..#..........#...................#..............##..#.....................#...................#..............#...........#........
#................................#....##......#.............#..............#.......................#.........#...........#........
..................#................#...............................#.....#..........#................#..............#.............
................#.#.........#.....##...............................................................#..............#...............
..#...............................................................................................#...............................
..........#.................#...........#.......#.........................#...#.......#...........................................
..##....#......................................#.#.......................................#.................#......................
.......................#..#...#.##......................................................................#.........#...#...........
...............#.........#..............#.....................................................#...................#...............
......#.................#............#......#...................#..#.........................#........................#........#..
......................................................................#...........................#........#......................
..........#..........#........................#.............##....................................................................
....#................................................#.......................#................#...............#...................
.................#....................................................#......#....................................................
.#........#.......................................................................................................................
......##..................#....#......#.................#....................#.....................#..#...........#...............
#...#...#...#..............#........#.......................#.#..........#...............................#......#.................
#...#...................#.............#........#..........#...............................................................#...#...
..#................................#...#.........................#...................#......#.....................................
...#...###..........#............#...............................................................#..........#.....................
............#..............#.......#.....#..........#.....#.........................................................#............#
..#......................#..#...#................................#......#.......#.....#..................#.........#..............
....##......#.......................................................#..............................................#..............
...............................#.....#....#.................................................#.......#............#................
..........#....#......................#........#..........................#......#................................................
......#.............................#...........#..................#...........................#................................#.
...........................##..........................................#.....#.#.....................#................#...........
..#..............#.........................................................#........................#.........#.................#.
#.....#.....#......................#....................#........................................#...........#...........#......#.
.......................................#..#................................#.........#.......#..#.....#..........................#
..........#..............##...............#..........................................................#......#......#......#....#..
.............#..............#..#......#........#..#......##.......................#...........#.......#...........................
......................#.......................................#.......#..#.....................................#.........#...##...
...........................#...........................#......#....#.............................#.............................#..
..................#............................#....#........##.........................#..............#.............#............
.......#....................#.....#........#.......#.#...#...............#.....#.#.........................#.......#.#............
.....#.........#.......#..........#.................#..#...#..................................................##..................
................#........................................................#........................................................
....##......#........#..................#.........................#...................................#...#...................#...
..............#....................#.......#.......................#.............#......#..............#..........................
...........................#..............#.....#............#.....................#........#....#.......................#........
........#..##................#.....#.#..............#..............................#........................#.........#...........
.........................................................#...........................##..........#........#.##...................."""

lines = input.split('\n')

UP_DIRECTION = '^'
RIGHT_DIRECTION = '>'
LEFT_DIRECTION = '<'
DOWN_DIRECTION = 'v'
DIRECTIONS = [UP_DIRECTION, RIGHT_DIRECTION, LEFT_DIRECTION, DOWN_DIRECTION]
FREE_SPACE = '.'
WALL = '#'


def get_next_position(current_position, current_direction):
    i, j = current_position
    if current_direction == UP_DIRECTION:
        return (i - 1, j)
    elif current_direction == RIGHT_DIRECTION:
        return (i, j + 1)
    elif current_direction == LEFT_DIRECTION:
        return (i, j - 1)
    elif current_direction == DOWN_DIRECTION:
        return (i + 1, j)
    raise ValueError("Invalid direction")


def is_position_a_wall(current_position, place):
    i, j = current_position
    return place[i][j] == WALL

def is_position_out_of_bounds(current_position, place):
    i, j = current_position
    return i < 0 or j < 0 or i >= len(place) or j >= len(place[i])

def rotate_direction_90_degree(current_direction):
    if current_direction == UP_DIRECTION:
        return RIGHT_DIRECTION
    if current_direction == RIGHT_DIRECTION:
        return DOWN_DIRECTION
    if current_direction == DOWN_DIRECTION:
        return LEFT_DIRECTION
    if current_direction == LEFT_DIRECTION:
        return UP_DIRECTION
    return ValueError("Invalid direction")

original_position = None
original_direction = None

for i, line in enumerate(lines):
    for j, char in enumerate(line):
        if char in DIRECTIONS:
            original_position = (i, j)
            original_direction = char

accessed_positions = set(original_position)

def replace_index_of_string(s, index, replacement):
    return s[:index] + replacement + s[index + 1:]

current_position = original_position
current_direction = original_direction
place = lines.copy()
while True:
    next_position = get_next_position(current_position, current_direction)
    if is_position_out_of_bounds(next_position, place):
        break
    if is_position_a_wall(next_position, place):
        current_direction = rotate_direction_90_degree(current_direction)
        continue
    # place[current_position[0]] = replace_index_of_string(place[current_position[0]], current_position[1], 'X')
    # place[current_position[0]][current_position[1]] = 'X'
    current_position = next_position
    # place[current_position[0]] = replace_index_of_string(place[current_position[0]], current_position[1], current_direction)
    accessed_positions.add(current_position)
    # print("\n".join(place))
    # breakpoint()

print("part 1", len(accessed_positions))



possible_blockades = set()

for i, line in enumerate(lines):
    for  j, char in enumerate(line):
        if is_position_a_wall((i, j), lines) or char in DIRECTIONS:
            continue
        current_position = original_position
        current_direction = original_direction
        new_place = lines.copy()
        new_place[i] = replace_index_of_string(new_place[i], j, WALL)
        accessed_positions_and_directions_index = set()
        while True:
            next_position = get_next_position(current_position, current_direction)
            if is_position_out_of_bounds(next_position, new_place):
                break
            if is_position_a_wall(next_position, new_place):
                current_direction = rotate_direction_90_degree(current_direction)
                continue
            current_position = next_position
            if (current_position, current_direction) in accessed_positions_and_directions_index:
                possible_blockades.add((i, j))
                break
            accessed_positions_and_directions_index.add((current_position, current_direction))


print('part 2', len(possible_blockades))
            


        
